<template>
  <div class="container-body">
    <h1>{{$store.state.chartList[0].doctorName}} 님의 진료내역</h1>
    <div class="card w-90" v-for="(chart, idx) in $store.state.chartList" :key="idx" id="container-card">
        <div class="card-body" style="display:flex; height:100px;">
        <div class="container-status" v-if="chart.status === 'WAITING'">
          <div class="circle before"></div><div class="status before">진료대기</div>
        </div>
        <div class="container-status" v-if="chart.status === 'OPEN'">
          <div class="circle open"></div><div class="status open">진료중</div>
        </div>
        <div class="container-status" v-if="chart.status === 'FINISHED'">
          <div class="circle done"></div><div class="status done">진료완료</div>
        </div>
        <div class="container-status" v-if="chart.status === 'CANCELED'">
          <div class="circle done"></div><div class="status done">취소완료</div>
        </div>
        <div class="container-status" v-if="chart.status === 'PENDING_CANCEL_PATIENT'">
          <div class="circle canceled"></div><div class="status canceled">환자취소대기</div>
        </div>
        <div class="container-status" v-if="chart.status === 'PENDING_CANCEL_DOCTOR'">
          <div class="circle canceled"></div><div class="status canceled">의사취소대기</div>
        </div>
        <div class="container-status" v-if="chart.status === 'PENDING_PRESCRIPTION'">
          <div class="circle pending"></div><div class="status pending">처방전 작성대기</div>
        </div>
          <div style="width:60%; text-align: left;">
            <h5 class="card-title" >{{chart.patientName}}</h5>
            <p class="card-text" >{{chart.appointmentTime}}</p>
          </div>
          <div style="line-height: 65px; width:20%;"><a :href="`/chart/detail/${chart.appointmentId}`" class="btn btn-primary">상세보기</a></div>
        </div>
    </div>
  </div>
</template>

<script>
import { mapState } from 'vuex';
export default {
  data(){
    return {
      doctorName: '',
    }
  },
  components: {
  },
  computed: {
    ...mapState(['chartList'])
  },
  created() {
    const doctorId = localStorage.getItem('userId');
    this.$store.dispatch('getChartList', doctorId);

  },
  methods:{
    sendApptId(){

    }
  }
}
</script>

<style>
.circle{
  width:20px;
  height: 20px;
  border-radius: 10px;
  border: 3px solid;
  margin-top: 23px;
}

.status{
  font-weight: bold;
  margin-left: 5px;
  line-height:65px;
}

.container-status{
  width: 20%;
  display:flex;
  line-height: 100px;
}

.before{
  border-color: darkorange;
  color: darkorange;
}
.open{
  border-color: green;
  color: green;
}

.done{
  border-color: gray;
  color: gray;
}
.canceled{
  border-color: red;
  color: red;
}

.pending{
  border-color: darkblue;
  color: darkblue;
}
</style>